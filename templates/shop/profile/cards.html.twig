{% extends 'base.html.twig' %}

{% block title %}Mes cartes virtuelles{% endblock %}

{% block body %}
<div class="bg-gray-100 dark:bg-gray-900 min-h-screen py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-extrabold text-gray-900 dark:text-gray-100 mb-8">Mes cartes virtuelles</h1>
        
        {% if cards|length > 0 %}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for card in cards %}
                    <div class="relative bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl shadow-lg overflow-hidden h-56 flex flex-col justify-between p-6 text-white">
                        <div class="absolute top-4 right-4">
                            <svg class="h-8 w-8 text-white opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path>
                                <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="font-mono text-sm opacity-75">Carte virtuelle</p>
                            <p class="font-mono text-2xl mt-2 tracking-wider">•••• •••• •••• {{ card.cardNumber|slice(-4) }}</p>
                        </div>
                        <div>
                            <p class="font-mono text-sm opacity-75">Solde</p>
                            <p class="font-mono text-xl">{{ card.balance|number_format(2, ',', ' ') }} €</p>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="font-mono text-sm">{{ card.user.firstName }} {{ card.user.lastName }}</p>
                            <div class="flex items-center">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium {{ card.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800' }}">
                                    {{ card.active ? 'Active' : 'Inactive' }}
                                </span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center">
                <p class="text-gray-700 dark:text-gray-300 mb-4">Vous n'avez pas encore de carte virtuelle.</p>
                <a href="#" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600">
                    Demander une carte virtuelle
                </a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
